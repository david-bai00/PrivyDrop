---
title: "Que la IA no se desv√≠e: un m√©todo de colaboraci√≥n realmente aplicable (con plantillas)"
description: "¬øLa IA escribe c√≥digo y se sale del tema? Convierte Codex/Claude en un compa√±ero de equipo con AGENTS.md, un AI Playbook y un flujo plan-first: menos retrabajo, m√°s mantenibilidad. Con ejemplos reales en Next.js."
date: "2025-12-26"
author: "david bai"
cover: "/blog-assets/ai-collaboration-playbook.webp"
tags:
  [
    "Colaboraci√≥n con IA",
    "Codex",
    "Proceso de ingenier√≠a",
    "C√≥digo abierto",
    "Next.js",
  ]
status: "published"
---

![](/blog-assets/ai-collaboration-playbook.webp)

¬øTe suena alguno de estos escenarios?

- Le pides a la IA que arregle un bug, pero termina tocando c√≥digo que no tiene nada que ver‚Äîy luego te toca revertir a mano
- Escribes un mont√≥n de prompts y aun as√≠ no encuentra el archivo correcto; acaba ‚Äúadivinando‚Äù
- A mitad de una conversaci√≥n larga, empieza a olvidar restricciones y la calidad se desploma

Si tratas la IA como ‚Äúun buscador m√°s r√°pido‚Äù, estos problemas no se notan. Pero cuando la tratas como ‚Äúun compa√±ero de colaboraci√≥n‚Äù, se convierten en un factor directo de calidad y entrega.

En este art√≠culo muestro un **m√©todo de ingenier√≠a accionable** para que la colaboraci√≥n con IA deje de ser ‚Äúmagia de prompts‚Äù y se convierta en un **proceso repetible**. En PrivyDrop, despu√©s de aplicarlo, el ritmo de nuevas funciones y fixes se volvi√≥ notablemente m√°s r√°pido y estable‚Äîno por asumir m√°s riesgo, sino por reducir el retrabajo.

Al final tendr√°s una estructura m√≠nima que puedes copiar a cualquier repositorio:

- `AGENTS.md`: restricciones duras a nivel de repo (l√≠neas rojas, valores por defecto, definici√≥n de done)
- `docs/ai-playbook/index.md`: entrada de una sola p√°gina (alta se√±al)
- `docs/ai-playbook/code-map.md`: mapa de c√≥digo (d√≥nde tocar)
- `docs/ai-playbook/flows.md`: flujos clave (c√≥mo corre)
- `docs/ai-playbook/collab-rules.md`: reglas de colaboraci√≥n + plantilla de plan de cambio (c√≥mo trabajamos)

Todos los ejemplos vienen del repo open source PrivyDrop (puedes comparar con la implementaci√≥n):
[<u>**https://github.com/david-bai00/PrivyDrop**</u>](https://github.com/david-bai00/PrivyDrop)

Y esta pr√°ctica de OpenAI tiene una filosof√≠a muy similar:
[<u>**https://openai.com/index/shipping-sora-for-android-with-codex/**</u>](https://openai.com/index/shipping-sora-for-android-with-codex/)

---

## Step 0: Define l√≠mites y ‚Äúdone‚Äù (no empieces por el prompt)

Este paso hace una sola cosa: dejar claro qu√© significa ‚Äúterminado‚Äù. Si no, la IA va a optimizar por ‚Äúque funcione‚Äù, no por ‚Äúque funcione de forma mantenible como espera tu equipo‚Äù.

Define tres restricciones m√≠nimas:

1. **Boundary (l√≠mite)**: lo que nunca debe ocurrir (l√≠neas rojas de privacidad/arquitectura, compatibilidad de protocolo, guardrails de par√°metros cr√≠ticos)
2. **Scope (alcance)**: un objetivo por cambio; prohibido ‚Äúya que estoy, optimizo‚Ä¶‚Äù
3. **Done (hecho)**: build/tests + checklist de regresi√≥n manual deben quedar escritos

Res√∫melo en una frase y ponlo al inicio de cada solicitud:

```text
Un solo objetivo, primero el plan; no cruzar l√≠neas rojas de privacidad/arquitectura; ‚Äúdone‚Äù significa que compila y trae checklist de regresi√≥n.
```

---

## Antipatrones comunes (evita estas trampas)

Antes de empezar, tres errores t√≠picos:

1. **Pedirle a la IA ‚Äúcambia el c√≥digo‚Äù sin plan**

   - Resultado: cambia 10 archivos y luego descubres que la direcci√≥n era incorrecta; revertir duele
   - Correcto: exigir un plan primero; implementar solo tras aprobarlo

2. **Meter todos los documentos en el prompt**

   - Resultado: explosi√≥n de contexto; la IA pierde la se√±al (ni encuentra los entry points)
   - Correcto: usar index + code-map como navegaci√≥n de alta se√±al

3. **Dejar que la IA ‚Äúarregle cosas de paso‚Äù**
   - Resultado: un PR mezcla m√∫ltiples objetivos; el review se encarece y los bugs son m√°s dif√≠ciles de revertir
   - Correcto: single-scope, cambios m√≠nimos y reversibles

---

## Step 1: Escribe `AGENTS.md` (restricciones duras, reutilizables)

Piensa en `AGENTS.md` como la versi√≥n ‚Äúlegible por m√°quina‚Äù de los valores por defecto y l√≠neas rojas del equipo. No es teor√≠a: es **un mecanismo de reutilizaci√≥n**.

En PrivyDrop, cinco puntos bastan para cubrir el n√∫cleo:

- Plan first: `AGENTS.en.md:7`
- One change, one purpose: `AGENTS.en.md:8`
- Privacy & architecture red line: `AGENTS.en.md:9`
- Docs must stay in sync: `AGENTS.en.md:12`
- Verification required: `AGENTS.en.md:13`

Archivo: [<u>**AGENTS.en.md**</u>](https://github.com/david-bai00/PrivyDrop/blob/main/AGENTS.en.md)

Plantilla m√≠nima sugerida (corta, estricta y accionable):

```md
# AGENTS ‚Äî Repo Rules

First Principles

- Plan-first: Propose a change plan and get approval before writing code
- Single-scope: One PR solves one goal; avoid ‚Äúwhile I‚Äôm here‚Äù fixes
- Redlines: Never cross privacy/architecture/protocol/key-parameter guardrails
- Docs-sync: Keep the playbook docs in sync when entry points/flows/interfaces change
- Validation: Must include build/tests and key manual regression checklist
```

### Soporte multi-idioma

Un patr√≥n pr√°ctico:

- Mant√©n `AGENTS.en.md` como versi√≥n can√≥nica
- A√±ade variantes localizadas si hace falta (p. ej. `AGENTS.<locale>.md`)
- Tras clonar, cada persona crea el symlink local seg√∫n idioma:

```bash
# English users
ln -s AGENTS.en.md AGENTS.md
```

- A√±ade `AGENTS.md` a `.gitignore` para evitar conflictos de symlinks

> **Idea clave**  
> La colaboraci√≥n con IA no se arregla con ‚Äúmejores prompts‚Äù, sino con ‚Äúrestricciones dentro del repo‚Äù. `AGENTS.md` hace que las reglas se reutilicen; el AI Playbook hace que el contexto dure.

---

## Step 2: Escribe `docs/ai-playbook/index.md` (entrada de alta se√±al)

Una raz√≥n com√∫n por la que la IA se desv√≠a: **no sabe d√≥nde est√°n tus entry points reales**. Entonces propone cambios por suposiciones.

El index debe lograr dos cosas:

- Se lee en 30 segundos: solo ‚Äúsnapshot del proyecto + √≠ndice de enlaces‚Äù
- Navegaci√≥n de un clic: llevar a code-map / flows / collab-rules

Referencia: [<u>**docs/ai-playbook/index.md**</u>](https://github.com/david-bai00/PrivyDrop/blob/main/docs/ai-playbook/index.md)

Plantilla m√≠nima:

```md
# AI Playbook ‚Äî Index

## Project Snapshot

- Stack: Next.js / Node / ...
- Red lines: ...

## Document Index

- Code map: docs/ai-playbook/code-map.md
- Key flows: docs/ai-playbook/flows.md
- Collaboration rules: docs/ai-playbook/collab-rules.md
```

---

## Step 3: Escribe `code-map.md` (d√≥nde tocar)

El objetivo es ‚Äúlocalizar r√°pido‚Äù, no ‚Äúense√±ar a implementar‚Äù:

- Solo directorios clave y archivos de entrada clave
- Una frase por archivo: su responsabilidad
- Al llegar una solicitud: identifica 3‚Äì8 candidatos en code-map antes de leer en profundidad

Referencia: [<u>**docs/ai-playbook/code-map.md**</u>](https://github.com/david-bai00/PrivyDrop/blob/main/docs/ai-playbook/code-map.md)

Opcional: a√±ade una tabla de ‚Äúsolicitud com√∫n ‚Üí entry points‚Äù:

```md
Common request routing

- New page / SEO: frontend/app/\*\*/page.tsx + metadata.ts
- i18n copy: frontend/constants/messages/\*
- Blog: frontend/content/blog/\* + frontend/lib/blog.ts
```

C√≥mo generarlo y mantenerlo:

- Primera versi√≥n: que la IA resuma ‚Äúdirectorios + entry points‚Äù para navegaci√≥n, no para exhaustividad
- Iteraci√≥n: actualiza incrementalmente por PR/commit; evita reescrituras completas

---

## Step 4: Escribe `flows.md` (c√≥mo corre)

Si code-map responde ‚Äúd√≥nde tocar‚Äù, flows responde ‚Äúc√≥mo corre‚Äù. Para la IA, esto es oro:

- Con secuencia + invariantes claros, deja de ‚Äúparchear por intuici√≥n‚Äù
- Los pitfalls hist√≥ricos se vuelven checklist reutilizable

Referencia: [<u>**docs/ai-playbook/flows.md**</u>](https://github.com/david-bai00/PrivyDrop/blob/main/docs/ai-playbook/flows.md)

Incluye al menos:

1. **Secuencia / flow clave** (Mermaid si hace falta)
2. **Checklist de debug** (logs/estados cruciales)
3. **Plantilla de micro-plan** (plan-first antes de tocar c√≥digo)

Gu√≠a de creaci√≥n/iteraci√≥n:

- Primera versi√≥n: que la IA reexponga el flujo E2E + secuencia clave + invariantes; t√∫ corriges (sobre todo red lines e invariantes) y lo dejas en docs
- Iteraci√≥n: actualizar por cambios en interfaces/secuencias

---

## Step 5: Haz ‚Äúplan first‚Äù obligatorio (un plan = mini dise√±o)

Aqu√≠ est√° el acelerador: mover el review de ‚Äúleer el diff‚Äù a ‚Äúleer el plan‚Äù.

Fija una plantilla en `collab-rules.md` y √∫sala como regla dura.

Plantilla PrivyDrop: [<u>**docs/ai-playbook/collab-rules.md**</u>](https://github.com/david-bai00/PrivyDrop/blob/main/docs/ai-playbook/collab-rules.md)

Estructura reutilizable:

```text
Title: <short, clear title>

Goals
- <what you want to achieve>

Scope / Files
- <list of files you‚Äôll change/add + why>

Approach
- <implementation plan and key design points>

Risks & Mitigations
- <risk> ‚Üí <mitigation>

Acceptance Criteria
- <verifiable acceptance items>

Rollback
- <how to revert quickly>

Docs to Update
- docs/ai-playbook/index.md / code-map.md / flows.md / collab-rules.md / others?

Validation
- Build: next build
- Manual: <key cases & regression points>
```

Un flujo m√°s estable en la pr√°ctica:

1. Leer index + code-map + flows (solo lectura, sin tocar c√≥digo)
2. Reexplicar estado actual y restricciones (t√∫ corriges una vez)
3. Escribir el plan de cambio (implementaci√≥n solo tras aprobaci√≥n)

> **Evita pitfalls**  
> Corrige la direcci√≥n en la fase de plan; evita construir y luego tirar. Single-scope baja el costo de rollback y facilita el merge.

---

## Step 5.1: Resistencia de contexto (checkpoint ‚Üí chat nuevo)

En tareas largas, la ca√≠da de calidad es casi inevitable. Convi√©rtelo en un h√°bito: cuando aparezcan suposiciones, olvidos o deriva, escribe el estado en un archivo y contin√∫a en un chat nuevo; o comprime/resume el contexto antes de seguir.

Plantilla m√≠nima de handoff (en `docs/ai-playbook/handoff.md` o archivo temporal):

```md
# Handoff

## Problem statement (3‚Äì5 sentences)

## Confirmed plan (bullets)

## Done / Not done

## Key files and entry points

## Red lines and invariants

## Acceptance & regression checklist

## Next-step checklist
```

No es ‚Äúescribir bonito‚Äù: es hacer que el contexto sea reutilizable fuera del chat.

---

## Step 6: Cierra el loop (trata al agente como a un nuevo compa√±ero)

Con todo lo anterior, la colaboraci√≥n se vuelve una tuber√≠a estable:

1. Solicitud ‚Üí restricciones (citar `AGENTS.md`)
2. Localizaci√≥n ‚Üí entry points (citar `index + code-map`)
3. Alineaci√≥n ‚Üí secuencia (citar `flows`)
4. Plan ‚Üí mini dise√±o (plantilla en `collab-rules`)
5. Implementaci√≥n ‚Üí cambios peque√±os y single-scope (rollback f√°cil)
6. Verificaci√≥n ‚Üí `next build` + regresiones clave
7. Sincronizaci√≥n ‚Üí docs del playbook al d√≠a

El beneficio m√°s visible: m√°s velocidad y estabilidad. Y esa velocidad viene de **menos retrabajo**:

- Corregir direcci√≥n al planear, no al final
- Single-scope hace barato el rollback y f√°cil el merge
- Flows convierte pitfalls en checklist

Si quieres una puerta de control, a√±ade estas dos preguntas al PR template:

- ¬øIncluye link/resumen del plan de cambio?
- ¬øActualizaste `docs/ai-playbook/*` si cambiaste entry points/flows/interfaces?

## Ejemplos de prompt (listos para copiar)

---

**Role**

You are a senior Next.js full-stack engineer with strong product instincts. Your collaboration quality determines whether this repo can iterate sustainably‚Äîbe thorough and professional.

**Task kickoff**

Please read `docs/ai-playbook/index.md` to understand the project context, code map, and collaboration rules. The current request is: "xxx".

**Working style**

Please deeply read relevant docs/code. Think systematically, ask clarifying questions, then propose analysis + a change plan for review. Implement only after approval.

---

## Referencia de industria: c√≥mo OpenAI organiza un sprint con Codex

OpenAI describe un flujo muy parecido aqu√≠:
[<u>**https://openai.com/index/shipping-sora-for-android-with-codex/**</u>](https://openai.com/index/shipping-sora-for-android-with-codex/)

Puntos a alinear:

- Tratar al agente como un ‚Äúnuevo senior‚Äù: capaz, pero necesita arquitectura/limitaciones claras
- Externalizar reglas: mantener un `AGENTS.md` fuerte compensa
- Plan antes de cambios reales: depura el plan antes que el c√≥digo
- Resistencia de contexto: cuando llegues al l√≠mite, escribe el plan en un archivo y contin√∫a
- Multi-sesi√≥n en paralelo: m√°s parecido a ‚Äúgestionar un equipo‚Äù que a usar una sola herramienta

---

## Estructura m√≠nima de directorios (copiable)

```text
AGENTS.en.md             # Canonical rules (English)
AGENTS.<locale>.md       # Optional localized rules
AGENTS.md                # Symlink (created locally after git clone)
docs/
  ai-playbook/
    index.md             # High-signal entry point
    code-map.md
    flows.md
    collab-rules.md
```

Si ya tienes docs dispersas: empieza por `index.md` para unificar el acceso; luego completa code-map/flows/plantillas.

---

## Pr√≥ximos pasos

1. **Empieza ya**: copia la estructura m√≠nima y comienza por `AGENTS.md`
2. **Implementaci√≥n de referencia**: [<u>**PrivyDrop GitHub**</u>](https://github.com/david-bai00/PrivyDrop)
3. **Feedback**: abre un issue o comenta si te sirve (o te atoras)
4. **Star**: si te aporta valor, deja una estrella üåü

---

## Cierre

El desarrollo asistido por IA no reduce la necesidad de rigor; la incrementa. La velocidad sostenible no viene de prompts m√°s largos, sino de restricciones m√°s fuertes: reglas externalizadas, plan-first, flows codificados y contexto durable.
